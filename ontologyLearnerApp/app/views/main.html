<!DOCTYPE html>

<html>
    <head>
        <title>#{get 'title' /}</title>
        <meta charset="${_response_encoding}">
        <link rel="stylesheet" media="screen" href="@{'/public/stylesheets/main.css'}">
        <link rel="stylesheet" media="screen" href="@{'/public/stylesheets/ui-lightness/jquery-ui-1.8.16.css'}">
        #{get 'moreStyles' /}
        <link rel="shortcut icon" type="image/png" href="@{'/public/images/favicon.png'}">
        <script src="@{'/public/javascripts/jquery-1.7.1.min.js'}" type="text/javascript" charset="${_response_encoding}"></script>
		<script src="@{'/public/javascripts/jquery-ui-1.8.16.min.js'}" type="text/javascript" charset="${_response_encoding}"></script>
		#{script "ontologyLearner.js" /}
		#{script "ontologyLearner.Util.js" /}
		#{script "ontologyLearner.UrlStore.js" /}
		#{script "widgets.spinner.js" /}
        #{get 'moreScripts' /}
        
        <script type="text/javascript">
        	(function(window, document, UrlStore) {
        		function encode(uri) {
        			return window.encodeURIComponent(uri);
        		}
        		
				UrlStore.getDocumentList = function() { return "@{Documents.list()}"; };
				UrlStore.getDocument = function(uuid, featureType, bypassCache) {
					uuid = encode(uuid);
					featureType = encode(featureType);
					bypassCache = encode(bypassCache);
					
					var url = "@{Documents.single(':uuid:')}".replace(":uuid:", uuid);
					if (!featureType) {
						featureType = "smart_nouns";
					}
					
					url += "?featureType=" + featureType.toUpperCase();
					
					if (bypassCache) {
						url += "&bypassCache=true";
					}
					return url;
				};
				
				UrlStore.getAspectList = function() { return "@{Aspects.list()}"; };
				UrlStore.getAspect = function(aspect) {
					aspect = encode(aspect);
					return "@{Aspects.single(':aspect:')}".replace(":aspect:", aspect);
				};
				UrlStore.postAspect = function(aspect) {
					aspect = encode(aspect);
					return "@{Aspects.postAspect(':aspect:')}".replace(":aspect:", aspect);
				};
				UrlStore.postKeyword = function(aspect, keyword) {
					aspect = encode(aspect);
					keyword = encode(keyword);
					return "@{Aspects.postKeyword(':aspect:', ':keyword:')}".replace(":aspect:", aspect).replace(":keyword:", keyword);
				};
				UrlStore.deleteAspect = function(aspect) {
					aspect = encode(aspect);
					return "@{Aspects.deleteAspect(':aspect:')}".replace(":aspect:", aspect);
				};
				UrlStore.deleteKeyword = function(aspect, keyword) {
					aspect = encode(aspect);
					keyword = encode(keyword);
					return "@{Aspects.deleteKeyword(':aspect:', ':keyword:')}".replace(":aspect:", aspect).replace(":keyword:", keyword);
				};
			})(window, window.document, window.ontologyLearner.UrlStore);
        </script>
    </head>
    <body>
        #{doLayout /}
    </body>
</html>
