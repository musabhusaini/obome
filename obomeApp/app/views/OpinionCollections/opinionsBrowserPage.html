#{extends "main.html" /}
#{set title:"Opinions Browser" /}

#{press.stylesheet "browserPages.css" /}
#{press.stylesheet "opinionsBrowserPage.css" /}
#{stylesheet "jqplot/jquery.jqplot.min.css" /}

<div id="content">
	<div class="ui-prominent ui-corner-all ui-distant ui-padded-message">
		Now you can view aspect-based polarities of each review/comment from your corpus. The polarities are given on a scale of -1 to +1 where
		-1 is the most negative opinion and +1 is the most positive opinion.
	</div>
	<div class="ui-float-left ob-reviews-container">
		<div class="ob-reviews-list-container ui-float-left">
			<div class="ui-widget-header ui-corner-top ol-header"><span>Reviews</span></div>
			<select id="lstReviews" class="ol-list ui-widget-content ob-reviews-list" size="20">
				%{ index = 0; }%
				#{list items:documents, as:"document"}
					%{ index++; }%
					<option value="${document}">Review ${index}</option>
				#{/list}
			</select>
		</div>
		<div class="ob-doc-container ui-float-right">
			<div id="documentContainer">
				<div class="ui-widget-header ui-corner-top ol-header"><span>Reviews Text</span></div>
				<div id="documentTextContainer" class="ob-document-text ui-widget-content">
				</div>
			</div>
		</div>		
	</div>
	<div class="ui-float-right ob-summary-container">
		<div class="ob-summary-inner-container">
			<div class="ob-summary-text-container">
				<div class="ui-widget-header ui-corner-top ol-header"><span>Opinion Summary</span></div>
				<div id="cntnrOpinionSummary" class="ui-widget-content ob-summary-box">
					<table id="tblOpinionSummary">
					</table>
				</div>
			</div>
			<div class="ob-summary-graph-container">
				<div class="ui-widget-header ui-corner-top ol-header"><span>Aspect Polarity Association</span></div>
				<div id="cntnrOpinionGraph" class="ui-widget-content ob-summary-box">
					<div id="cnvsOpinionGraph">
					</div>
				</div>
			</div>
		</div>
	</div>

	<div class="ui-helper-clearfix"></div>
</div>

#{script "jqplot/jquery.jqplot.min.js" /} 
#{script "jqplot/plugins/jqplot.barRenderer.min.js" /}
#{script "jqplot/plugins/jqplot.categoryAxisRenderer.min.js" /}
#{script "jqplot/plugins/jqplot.canvasAxisLabelRenderer.min.js" /}
#{script "jqplot/plugins/jqplot.canvasAxisTickRenderer.min.js" /}
#{script "jqplot/plugins/jqplot.canvasTextRenderer.min.js" /}

#{press.script "widgets.documentBrowser.js" /}
#{press.script "opinionsBrowserPage.html.js" /}

<script type="text/javascript">
	(function(window, document, $, ontologyLearner, routes) {
		$(document).ready(function() {
			ontologyLearner.displayPage({
				collection: $.parseJSON($("<div>").html("${collection}").text())
			});
		});
	})(window, window.document, window.jQuery, window.ontologyLearner, ontologyLearner.routes)
</script>